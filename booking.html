<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- SEO Meta Tags -->
    <title>Book Your Excursion - WeHostMorocco | Easy Online Booking</title>
    <meta name="description" content="Book your perfect excursion in Marrakech and Morocco with WeHostMorocco. Easy online booking for hot air balloon rides, desert tours, city visits and more. Secure payment and instant confirmation.">
    <meta name="keywords" content="WeHostMorocco, book excursion Marrakech, Morocco tour booking, online reservation, book hot air balloon, Marrakech travel booking">
    <meta name="author" content="WeHostMorocco">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://wehostmorocco.com/booking.html">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://wehostmorocco.com/assets/metadata/2.jpeg">
    <link rel="icon" type="image/png" sizes="32x32" href="https://wehostmorocco.com/assets/metadata/2.jpeg">
    <link rel="icon" type="image/png" sizes="16x16" href="https://wehostmorocco.com/assets/metadata/2.jpeg">
    <link rel="apple-touch-icon" sizes="180x180" href="https://wehostmorocco.com/assets/metadata/2.jpeg">
    <link rel="shortcut icon" type="image/png" href="https://wehostmorocco.com/assets/metadata/2.jpeg">
    <meta name="msapplication-TileImage" content="https://wehostmorocco.com/assets/metadata/2.jpeg">
    <meta name="msapplication-TileColor" content="#FF6B35">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://wehostmorocco.com/booking.html">
    <meta property="og:title" content="Book Your Excursion - WeHostMorocco | Easy Online Booking">
    <meta property="og:description" content="Book your perfect excursion in Marrakech and Morocco with WeHostMorocco. Easy online booking for hot air balloon rides, desert tours, city visits and more.">
    <meta property="og:image" content="https://wehostmorocco.com/assets/metadata/2.jpeg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="WeHostMorocco">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://wehostmorocco.com/booking.html">
    <meta name="twitter:title" content="Book Your Excursion - WeHostMorocco | Easy Online Booking">
    <meta name="twitter:description" content="Book your perfect excursion in Marrakech and Morocco with WeHostMorocco. Easy online booking for hot air balloon rides, desert tours, city visits and more.">
    <meta name="twitter:image" content="https://wehostmorocco.com/assets/metadata/2.jpeg">
    
    <!-- Additional SEO -->
    <meta name="theme-color" content="#FF6B35">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/fr.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/es.js"></script>


    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: '#FF6B35',
                            light: '#FF8A5C',
                            dark: '#E55A2B'
                        },
                        secondary: {
                            DEFAULT: '#4ECDC4',
                            light: '#6ED7D0',
                            dark: '#3DB8B0'
                        },
                        desert: {
                            DEFAULT: '#F7DC6F',
                            light: '#F9E391',
                            dark: '#F4D03F'
                        },
                        dark: '#2C3E50',
                        light: '#F8F9FA',
                        accent: '#FFD93D',
                        gradient: {
                            start: '#667eea',
                            end: '#764ba2'
                        },
                        vibrant: {
                            pink: '#FF6B9D',
                            purple: '#9B59B6',
                            orange: '#FF9F43',
                            green: '#00B894'
                        }
                    },
                    fontFamily: {
                        sans: ['Poppins', 'Inter', 'Helvetica Neue', 'Helvetica', 'Arial', 'sans-serif'],
                        display: ['Poppins', 'Inter', 'Helvetica Neue', 'Helvetica', 'Arial', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in',
                        'slide-up': 'slideUp 0.5s ease-out',
                        'bounce-in': 'bounceIn 0.6s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        },
                        bounceIn: {
                            '0%': { transform: 'scale(0.3)', opacity: '0' },
                            '50%': { transform: 'scale(1.05)' },
                            '70%': { transform: 'scale(0.9)' },
                            '100%': { transform: 'scale(1)', opacity: '1' }
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Prevent double-tap zoom on mobile devices */
        * {
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Prevent double-click zoom on images and interactive elements */
        img, button, a {
            touch-action: manipulation;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }
        
        /* Allow text selection in input fields and textareas */
        input, textarea, select, [contenteditable="true"] {
            touch-action: auto;
            -webkit-user-select: auto;
            user-select: auto;
        }
    </style>
    <style>
        /* Optimize for mobile performance */
        * {
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
        
        /* Optimize animations for mobile */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* Mobile navbar scroll behavior */
        @media (max-width: 1023px) {
            .navbar-hidden {
                transform: translateY(-100%);
            }
            
            .navbar-visible {
                transform: translateY(0);
            }
            
            nav {
                transition: transform 0.3s ease-in-out;
            }
        }

        /* Professional dropdown styling */
        .group:hover .group-hover\:opacity-100 {
            opacity: 1;
        }
        
        .group:hover .group-hover\:visible {
            visibility: visible;
        }
        
        .group:hover .group-hover\:rotate-180 {
            transform: rotate(180deg);
        }

        /* Smooth transitions for dropdowns */
        .transition-all {
            transition: all 0.2s ease-in-out;
        }

        /* Checkmark styling */
        [data-lang-check], [data-currency-check], [data-mobile-lang-check], [data-mobile-currency-check] {
            transition: opacity 0.2s ease-in-out;
        }

        /* Enhanced floating button */
        .floating-button {
            animation: bounce 2s infinite;
            background: linear-gradient(135deg, #00B894, #00CEC9);
            border: 3px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 25px rgba(0, 184, 148, 0.3);
        }

        /* Enhanced booking form */
        .booking-form {
            background: linear-gradient(135deg, #FFFFFF 0%, #F8F9FA 100%);
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.08);
            border: 2px solid rgba(255, 107, 53, 0.1);
            border-radius: 24px;
        }

        /* Modern input styles */
        input, select, textarea {
            border: 2px solid #E9ECEF;
            transition: all 0.3s ease;
            border-radius: 12px;
        }

        input:focus, select:focus, textarea:focus {
            border-color: #FF6B35;
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
            transform: translateY(-1px);
        }

        /* Enhanced buttons */
        .btn-primary {
            background: linear-gradient(135deg, #FF6B35, #FF8A5C);
            border: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.3);
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
    </style>
</head>

<body class="bg-light antialiased">
    <!-- Navigation -->
    <nav id="navbar" class="sticky top-0 w-full bg-white lg:bg-white lg:backdrop-blur-sm lg:shadow-sm z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-2 md:py-3">
                <a href="index.html" class="flex items-center">
                    <img src="assets/loogo-larger.png" alt="WeHostMorocco logo" class="object-contain mr-2 h-[56px] w-auto">
                    <span class="text-xl font-bold text-dark"></span>
                </a>

                <!-- Language and Currency Selector -->
                <div class="hidden lg:flex items-center space-x-4 mr-4">
                    <!-- Language Dropdown -->
                    <div class="relative group">
                        <button id="langDropdownBtn" class="flex items-center space-x-2 text-sm text-gray-600 hover:text-gray-800 transition-colors duration-200 px-3 py-2 rounded-lg hover:bg-gray-50">
                            <i class="fas fa-globe text-lg"></i>
                            <span id="currentLang" class="font-medium">FR</span>
                            <i class="fas fa-chevron-down text-xs transition-transform duration-200 group-hover:rotate-180"></i>
                        </button>
                        <div id="langDropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                            <div class="py-2">
                                <a href="#" data-lang="fr" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-primary transition-colors duration-200">
                                    <span class="text-xl mr-3 flex-shrink-0">üá´üá∑</span>
                                    <span>Fran√ßais</span>
                                    <i class="fas fa-check text-primary ml-auto opacity-0" data-lang-check="fr"></i>
                                </a>
                                <a href="#" data-lang="en" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-primary transition-colors duration-200">
                                    <span class="text-xl mr-3 flex-shrink-0">üá∫üá∏</span>
                                    <span>English</span>
                                    <i class="fas fa-check text-primary ml-auto opacity-0" data-lang-check="en"></i>
                                </a>
                                <a href="#" data-lang="es" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-primary transition-colors duration-200">
                                    <span class="text-xl mr-3 flex-shrink-0">üá™üá∏</span>
                                    <span>Espa√±ol</span>
                                    <i class="fas fa-check text-primary ml-auto opacity-0" data-lang-check="es"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Currency Dropdown -->
                    <div class="relative group">
                        <button id="currencyDropdownBtn" class="flex items-center space-x-2 text-sm text-gray-600 hover:text-gray-800 transition-colors duration-200 px-3 py-2 rounded-lg hover:bg-gray-50">
                            <i class="fas fa-coins text-lg"></i>
                            <span id="currentCurrency" class="font-medium">MAD</span>
                            <i class="fas fa-chevron-down text-xs transition-transform duration-200 group-hover:rotate-180"></i>
                        </button>
                        <div id="currencyDropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                            <div class="py-2">
                                <a href="#" data-currency="mad" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-primary transition-colors duration-200">
                                    <span class="text-lg font-bold text-green-600 mr-3 flex-shrink-0">MAD</span>
                                    <span>MAD (Dirham)</span>
                                    <i class="fas fa-check text-primary ml-auto opacity-0" data-currency-check="mad"></i>
                                </a>
                                <a href="#" data-currency="eur" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-primary transition-colors duration-200">
                                    <span class="text-lg font-bold text-blue-600 mr-3 flex-shrink-0">‚Ç¨</span>
                                    <span>EUR (Euro)</span>
                                    <i class="fas fa-check text-primary ml-auto opacity-0" data-currency-check="eur"></i>
                                </a>
                                <a href="#" data-currency="usd" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-primary transition-colors duration-200">
                                    <span class="text-lg font-bold text-green-600 mr-3 flex-shrink-0">$</span>
                                    <span>USD (Dollar US)</span>
                                    <i class="fas fa-check text-primary ml-auto opacity-0" data-currency-check="usd"></i>
                                </a>
                                <a href="#" data-currency="cad" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-primary transition-colors duration-200">
                                    <span class="text-lg font-bold text-red-600 mr-3 flex-shrink-0">C$</span>
                                    <span>CAD (Dollar Canadien)</span>
                                    <i class="fas fa-check text-primary ml-auto opacity-0" data-currency-check="cad"></i>
                                </a>
                                <a href="#" data-currency="gbp" class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-primary transition-colors duration-200">
                                    <span class="text-lg font-bold text-blue-600 mr-3 flex-shrink-0">¬£</span>
                                    <span>GBP (Pound)</span>
                                    <i class="fas fa-check text-primary ml-auto opacity-0" data-currency-check="gbp"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="hidden lg:flex items-center space-x-8">
                    <a href="index.html#accueil" class="text-gray-800 hover:text-gray-600 transition-colors duration-200 font-medium text-sm" data-i18n="nav.home">Accueil</a>
                    <a href="index.html#services" class="text-gray-800 hover:text-gray-600 transition-colors duration-200 font-medium text-sm" data-i18n="nav.services">Services</a>
                    <a href="index.html#reviews" class="text-gray-800 hover:text-gray-600 transition-colors duration-200 font-medium text-sm" data-i18n="nav.reviews">Avis</a>
                    <a href="index.html#reservation" class="text-gray-800 hover:text-gray-600 transition-colors duration-200 font-medium text-sm" data-i18n="nav.booking">R√©servation</a>
                    <a href="contact.html" class="text-gray-800 hover:text-gray-600 transition-colors duration-200 font-medium text-sm" data-i18n="nav.contact">Contact</a>

                    <a href="index.html#reservation" class="reserver-btn bg-primary hover:bg-primary-dark text-white px-6 py-2 rounded-full font-medium transition-all duration-200 shadow-md hover:shadow-lg">
                        <i class="fas fa-calendar-check mr-2"></i> <span data-i18n="cta.book">R√©server</span>
                    </a>
                </div>

                <div class="lg:hidden flex items-center">
                    <button id="mobile-menu-button" class="text-gray-800 p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile menu -->
        <div id="mobile-menu" class="hidden lg:hidden bg-white border-t border-gray-200 shadow-lg">
            <div class="px-4 py-4 space-y-3">
                <!-- Mobile Language and Currency Selector -->
                <div class="py-2 border-b border-gray-200">
                    <!-- Mobile Language Dropdown -->
                    <div class="mb-3">
                        <button id="mobileLangDropdownBtn" class="flex items-center justify-between w-full text-sm text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-50 transition-colors duration-200">
                            <div class="flex items-center space-x-2">
                                <i class="fas fa-globe text-lg text-primary"></i>
                                <span data-i18n="labels.languages">Langues:</span>
                                <span id="mobileCurrentLang" class="font-medium">Fran√ßais</span>
                            </div>
                            <i class="fas fa-chevron-down text-xs transition-transform duration-200"></i>
                        </button>
                        <div id="mobileLangDropdown" class="hidden mt-2 ml-8 bg-gray-50 rounded-lg p-2 space-y-1">
                            <a href="#" data-lang="fr" class="flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-white hover:text-primary rounded transition-colors duration-200">
                                <span class="text-lg mr-2 flex-shrink-0">üá´üá∑</span>
                                <span>Fran√ßais</span>
                                <i class="fas fa-check text-primary ml-auto opacity-0" data-mobile-lang-check="fr"></i>
                            </a>
                            <a href="#" data-lang="en" class="flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-white hover:text-primary rounded transition-colors duration-200">
                                <span class="text-lg mr-2 flex-shrink-0">üá∫üá∏</span>
                                <span>English</span>
                                <i class="fas fa-check text-primary ml-auto opacity-0" data-mobile-lang-check="en"></i>
                            </a>
                            <a href="#" data-lang="es" class="flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-white hover:text-primary rounded transition-colors duration-200">
                                <span class="text-lg mr-2 flex-shrink-0">üá™üá∏</span>
                                <span>Espa√±ol</span>
                                <i class="fas fa-check text-primary ml-auto opacity-0" data-mobile-lang-check="es"></i>
                            </a>
                        </div>
                    </div>
                    
                    <!-- Mobile Currency Dropdown -->
                    <div>
                        <button id="mobileCurrencyDropdownBtn" class="flex items-center justify-between w-full text-sm text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-50 transition-colors duration-200">
                            <div class="flex items-center space-x-2">
                                <i class="fas fa-coins text-lg text-primary"></i>
                                <span data-i18n="labels.currency">Devise:</span>
                                <span id="mobileCurrentCurrency" class="font-medium">MAD</span>
                            </div>
                            <i class="fas fa-chevron-down text-xs transition-transform duration-200"></i>
                        </button>
                        <div id="mobileCurrencyDropdown" class="hidden mt-2 ml-8 bg-gray-50 rounded-lg p-2 space-y-1">
                            <a href="#" data-currency="mad" class="flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-white hover:text-primary rounded transition-colors duration-200">
                                <span class="text-lg font-bold text-green-600 mr-2 flex-shrink-0">MAD</span>
                                <span>MAD (Dirham)</span>
                                <i class="fas fa-check text-primary ml-auto opacity-0" data-mobile-currency-check="mad"></i>
                            </a>
                            <a href="#" data-currency="eur" class="flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-white hover:text-primary rounded transition-colors duration-200">
                                <span class="text-lg font-bold text-blue-600 mr-2 flex-shrink-0">‚Ç¨</span>
                                <span>EUR (Euro)</span>
                                <i class="fas fa-check text-primary ml-auto opacity-0" data-mobile-currency-check="eur"></i>
                            </a>
                            <a href="#" data-currency="usd" class="flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-white hover:text-primary rounded transition-colors duration-200">
                                <span class="text-lg font-bold text-green-600 mr-2 flex-shrink-0">$</span>
                                <span>USD (Dollar US)</span>
                                <i class="fas fa-check text-primary ml-auto opacity-0" data-mobile-currency-check="usd"></i>
                            </a>
                            <a href="#" data-currency="cad" class="flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-white hover:text-primary rounded transition-colors duration-200">
                                <span class="text-lg font-bold text-red-600 mr-2 flex-shrink-0">C$</span>
                                <span>CAD (Dollar Canadien)</span>
                                <i class="fas fa-check text-primary ml-auto opacity-0" data-mobile-currency-check="cad"></i>
                            </a>
                            <a href="#" data-currency="gbp" class="flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-white hover:text-primary rounded transition-colors duration-200">
                                <span class="text-lg font-bold text-blue-600 mr-2 flex-shrink-0">¬£</span>
                                <span>GBP (Pound)</span>
                                <i class="fas fa-check text-primary ml-auto opacity-0" data-mobile-currency-check="gbp"></i>
                            </a>
                        </div>
                    </div>
                </div>
                
                <a href="index.html#accueil" class="block py-3 px-3 text-gray-800 hover:text-primary hover:bg-gray-50 rounded-lg transition-colors duration-200 font-medium">
                    <i class="fas fa-home mr-3 text-gray-600"></i><span data-i18n="nav.home">Accueil</span>
                </a>
                <a href="index.html#services" class="block py-3 px-3 text-gray-800 hover:text-primary hover:bg-gray-50 rounded-lg transition-colors duration-200 font-medium">
                    <i class="fas fa-concierge-bell mr-3 text-gray-600"></i><span data-i18n="nav.services">Services</span>
                </a>
                <a href="index.html#reviews" class="block py-3 px-3 text-gray-800 hover:text-primary hover:bg-gray-50 rounded-lg transition-colors duration-200 font-medium">
                    <i class="fas fa-star mr-3 text-gray-600"></i><span data-i18n="nav.reviews">Avis</span>
                </a>
                <a href="index.html#reservation" class="block py-3 px-3 text-gray-800 hover:text-primary hover:bg-gray-50 rounded-lg transition-colors duration-200 font-medium">
                    <i class="fas fa-calendar-check mr-3 text-gray-600"></i><span data-i18n="nav.booking">R√©servation</span>
                </a>
                <a href="contact.html" class="block py-3 px-3 text-gray-800 hover:text-primary hover:bg-gray-50 rounded-lg transition-colors duration-200 font-medium">
                    <i class="fas fa-envelope mr-3 text-gray-600"></i><span data-i18n="nav.contact">Contact</span>
                </a>
                <div class="pt-3 border-t border-gray-200 reserver-mobile-section">
                    <a href="index.html#reservation" class="reserver-btn-mobile inline-block bg-primary hover:bg-primary-dark text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 w-full text-center">
                        <i class="fas fa-calendar-check mr-2"></i> <span data-i18n="cta.book_now">R√©server maintenant</span>
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="min-h-screen">
        <!-- Hero Section -->
        <section class="py-20 bg-gradient-to-br from-primary/5 to-secondary/5">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center animate-bounce-in">
                    <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-dark mb-6" data-i18n="booking_page.hero.title">
                        üìã R√©servation
                    </h1>
                    <p class="text-xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed" data-i18n="booking_page.hero.subtitle">
                        Compl√©tez votre r√©servation en toute s√©curit√©
                    </p>
                    <div class="flex justify-center">
                        <div class="w-24 h-1 bg-primary rounded-full"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Booking Section -->
        <section class="py-16 bg-white">
            <div class="max-w-6xl mx-auto px-4">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Activity Details -->
                <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                    <h2 class="text-2xl font-bold text-dark mb-6" data-i18n="booking_page.details.title">üìã D√©tails de l'activit√©</h2>
                    
                    <div id="activity-details" class="space-y-4">
                        <!-- Activity details will be populated by JavaScript -->
                    </div>

                    <div class="mt-6 p-4 bg-primary/10 rounded-lg">
                        <p class="text-primary font-bold text-sm" data-i18n="booking_page.details.pay_later">üîò R√©server maintenant et payer apr√®s</p>
                    </div>
                </div>

                <!-- Booking Form -->
                <div class="booking-form bg-white rounded-2xl shadow-lg p-6 md:p-8">
                    <h2 class="text-2xl font-bold text-dark mb-6" data-i18n="booking_page.form.title">üë§ Informations personnelles</h2>
                    
                    <form id="booking-form" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 font-medium mb-2" data-i18n="booking_page.form.first_name_label">Pr√©nom *</label>
                                <input type="text" name="firstName" required data-i18n-placeholder="booking_page.form.first_name_placeholder" placeholder="Votre pr√©nom"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2" data-i18n="booking_page.form.last_name_label">Nom *</label>
                                <input type="text" name="lastName" required data-i18n-placeholder="booking_page.form.last_name_placeholder" placeholder="Votre nom"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                        </div>

                        <div>
                            <label class="block text-gray-700 font-medium mb-2" data-i18n="booking_page.form.email_label">üìß Email *</label>
                            <input type="email" name="email" required data-i18n-placeholder="booking_page.form.email_placeholder" placeholder="Votre adresse email"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                        </div>

                        <div>
                            <label class="block text-gray-700 font-medium mb-2" data-i18n="booking_page.form.phone_label">üìû T√©l√©phone *</label>
                            <div class="flex border border-gray-300 rounded-lg focus-within:ring-2 focus-within:ring-primary focus-within:border-transparent overflow-hidden">
                                <select name="country_code" class="w-20 sm:w-24 px-2 sm:px-3 py-3 border-0 focus:outline-none text-xs sm:text-sm bg-white">
                                    <option value="+212" selected>üá≤üá¶ +212</option>
                                    <option value="+33">üá´üá∑ +33</option>
                                    <option value="+1">üá∫üá∏ +1</option>
                                    <option value="+44">üá¨üáß +44</option>
                                    <option value="+49">üá©üá™ +49</option>
                                    <option value="+34">üá™üá∏ +34</option>
                                    <option value="+39">üáÆüáπ +39</option>
                                    <option value="+31">üá≥üá± +31</option>
                                    <option value="+32">üáßüá™ +32</option>
                                    <option value="+41">üá®üá≠ +41</option>
                                    <option value="+213">üá©üáø +213</option>
                                    <option value="+216">üáπüá≥ +216</option>
                                    <option value="+218">üá±üáæ +218</option>
                                    <option value="+20">üá™üá¨ +20</option>
                                    <option value="+966">üá∏üá¶ +966</option>
                                    <option value="+971">üá¶üá™ +971</option>
                                    <option value="+974">üá∂üá¶ +974</option>
                                    <option value="+965">üá∞üáº +965</option>
                                    <option value="+973">üáßüá≠ +973</option>
                                    <option value="+968">üá¥üá≤ +968</option>
                                </select>
                                <div class="w-px bg-gray-300"></div>
                                <input type="tel" name="phone" required placeholder="Votre num√©ro" data-i18n-placeholder="booking_page.form.phone_placeholder"
                                       class="flex-1 px-3 sm:px-4 py-3 border-0 focus:outline-none text-sm sm:text-base">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 font-medium mb-2" data-i18n="booking_page.form.departure_date_label">üìÖ Date de d√©part *</label>
                                <input type="text" name="departureDate" id="departure-date" required
                                       placeholder="S√©lectionnez votre date"
                                       data-i18n-placeholder="booking_page.form.departure_date_placeholder"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2" data-i18n="booking_page.form.participants_label">üë• Nombre de personnes *</label>
                                <input type="number" name="participants" min="1" max="10" required
                                       placeholder="Nombre de personnes"
                                       data-i18n-placeholder="booking_page.form.participants_placeholder"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                        </div>

                        <div>
                                <label class="block text-gray-700 font-medium mb-2" data-i18n="booking_page.form.pickup_label">üè® Lieu de prise en charge</label>
                                <input type="text" name="pickupLocation" placeholder="Adresse de votre h√¥tel/riad" data-i18n-placeholder="booking_page.form.pickup_placeholder"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                        </div>

                        <div>
                            <label class="block text-gray-700 font-medium mb-2" data-i18n="booking_page.form.message_label">üí¨ Message (optionnel)</label>
                            <textarea name="message" rows="4" placeholder="Demandes sp√©ciales, questions, etc." data-i18n-placeholder="booking_page.form.message_placeholder"
                                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"></textarea>
                        </div>

                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h3 class="font-bold text-dark mb-2" data-i18n="booking_page.conditions.title">üìã Conditions de r√©servation</h3>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li data-i18n="booking_page.conditions.free_cancellation">‚Ä¢ R√©servation gratuite, paiement √† l'arriv√©e</li>
                              
                            </ul>
                        </div>

                        <button type="submit" class="btn-primary w-full text-white py-4 rounded-lg font-bold text-lg transition-all duration-200 shadow-lg hover:shadow-xl" data-i18n="booking_page.form.submit">
                            üîò Confirmer ma r√©servation
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>
    </main>

    <!-- Footer -->
    <footer id="contact" class="footer-gradient text-white pt-12 md:pt-16 pb-8">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8 mb-8 sm:mb-12">
                <div>
                    <div class="flex items-center mb-4">
                        <img src="./assets/lll.png" alt="WeHostMorocco logo" style="width:56px;height:64px;" class="object-contain mr-2">
                    </div>
                    <p class="text-white text-xs sm:text-sm mb-4" data-i18n="footer.follow">
                        Suivez nous :
                    </p>
                    <div class="flex space-x-4">
                        <a href="https://www.instagram.com/wehostmorocco/?hl=en" class="text-white hover:text-gray-200 transition">
                            <i class="fab fa-instagram text-xl"></i>
                        </a>
                        <a href="https://www.facebook.com/share/1AK3irbG4G/?mibextid=wwXIfr" target="_blank" rel="noopener noreferrer" class="text-white hover:text-gray-200 transition">
                            <i class="fab fa-facebook text-xl"></i>
                        </a>
                        <a href="http://www.tiktok.com/@wehostmorocco0" target="_blank" rel="noopener noreferrer" class="text-white hover:text-gray-200 transition">
                            <i class="fab fa-tiktok text-xl"></i>
                        </a>
                    </div>
                </div>

                <div>
                    <h4 class="font-semibold text-lg mb-4" data-i18n="booking_page.footer.services.title">Services</h4>
                    <ul class="space-y-2">
                        <li><a href="#services" class="text-white hover:text-gray-200 text-xs sm:text-sm transition-colors duration-200" data-i18n="booking_page.footer.services.transfer">Transfert A√©roport</a></li>
                        <li><a href="#services" class="text-white hover:text-gray-200 text-xs sm:text-sm transition-colors duration-200" data-i18n="booking_page.footer.services.excursions">Excursions & Tours</a></li>
                        <li><a href="#services" class="text-white hover:text-gray-200 text-xs sm:text-sm transition-colors duration-200" data-i18n="booking_page.footer.services.stays">H√©bergement</a></li>
                        <li><a href="#services" class="text-white hover:text-gray-200 text-xs sm:text-sm transition-colors duration-200" data-i18n="booking_page.footer.services.guide">Guide Local</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="font-semibold text-lg mb-4" data-i18n="booking_page.footer.info.title">Informations</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-white hover:text-gray-200 text-xs sm:text-sm transition-colors duration-200" data-i18n="booking_page.footer.info.about">√Ä propos</a></li>
                        <li><a href="#" class="text-white hover:text-gray-200 text-xs sm:text-sm transition-colors duration-200" data-i18n="booking_page.footer.info.faq">FAQ</a></li>
                        <li><a href="#" class="text-white hover:text-gray-200 text-xs sm:text-sm transition-colors duration-200" data-i18n="booking_page.footer.info.blog">Blog voyage</a></li>
                        <li><a href="#" class="text-white hover:text-gray-200 text-xs sm:text-sm transition-colors duration-200" data-i18n="booking_page.footer.info.testimonials">T√©moignages</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="font-semibold text-lg mb-4" data-i18n="footer.contact">Contact</h4>
                    <div class="space-y-3">
                        <div class="flex items-center">
                            <i class="fab fa-whatsapp text-green-400 mr-3"></i>
                            <a href="tel:+14385186384" class="text-white text-xs sm:text-sm hover:underline">+1(438)5186384</a>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-envelope text-white mr-3"></i>
                            <a href="mailto:Wehostmorocco@gmail.com" class="text-white text-xs sm:text-sm hover:underline">Wehostmorocco@gmail.com</a>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-map-marker-alt text-white mr-3"></i>
                            <span class="text-white text-xs sm:text-sm" data-i18n="footer.location">Marrakech, Maroc</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="border-t border-gray-800 pt-6 sm:pt-8 flex flex-col md:flex-row justify-between items-center">
                <div class="text-white text-xs sm:text-sm mb-4 md:mb-0" data-i18n="footer.copyright">
                    &copy; 2025 WeHostMorocco. Tous droits r√©serv√©s.
                </div>
            </div>
        </div>
    </footer>

    <!-- Floating WhatsApp Button -->
    <div class="fixed bottom-4 sm:bottom-6 right-4 sm:right-6 z-50">
        <a href="https://wa.me/14385186384" class="floating-button bg-green-500 hover:bg-green-600 text-white w-14 h-14 sm:w-16 sm:h-16 rounded-full flex items-center justify-center shadow-lg transition-all duration-200 hover:scale-110">
            <i class="fab fa-whatsapp text-xl sm:text-2xl"></i>
        </a>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
        // Initialize date picker
        const flatpickrDateFormats = {
            fr: "d/m/Y",
            es: "d/m/Y",
            en: "m/d/Y"
        };

        function getFlatpickrLocale(lang) {
            if (typeof flatpickr === 'undefined') return undefined;
            switch (lang) {
                case 'fr':
                    return flatpickr.l10ns?.fr || flatpickr.l10ns?.default;
                case 'es':
                    return flatpickr.l10ns?.es || flatpickr.l10ns?.default;
                default:
                    return flatpickr.l10ns?.default;
            }
        }

        const initialLang = getBookingLanguage();
        let departurePicker = flatpickr("#departure-date", {
            minDate: "today",
            dateFormat: flatpickrDateFormats[initialLang] || "d/m/Y",
            locale: getFlatpickrLocale(initialLang)
        });

        function getBookingLanguage() {
            try {
                // Set default language to English if not set
                if (!localStorage.getItem('site_lang')) {
                    localStorage.setItem('site_lang', 'en');
                }
                return localStorage.getItem('site_lang') || 'en';
            } catch (_) {
                return 'en';
            }
        }

        function getBookingDict(lang) {
            if (typeof window !== 'undefined' && window.bookingTranslations) {
                const targetLang = lang || getBookingLanguage();
                return window.bookingTranslations[targetLang] || window.bookingTranslations.en || {};
            }
            return {};
        }

        // Get activity details from URL parameters
        function getActivityDetails() {
            const urlParams = new URLSearchParams(window.location.search);
            const activityId = urlParams.get('activity');
            const activityName = urlParams.get('name');
            const activityPrice = urlParams.get('price');

            const defaultLang = 'en';
            const currentLang = getBookingLanguage();

            const activityDetails = {
                'transfert-essaouira': {
                    translations: {
                        fr: {
                    name: 'Transfert priv√© Marrakech ‚Äì Essaouira',
                    description: 'Profitez d\'un transfert confortable en van priv√© de Marrakech √† Essaouira pour un petit groupe de 1 √† 4 personnes. Voyagez √† votre rythme avec un chauffeur professionnel, tout en d√©couvrant les paysages entre l\'Atlas et l\'oc√©an.',
                    price: 'Sur demande',
                    duration: '2h30',
                            group: '1-4 personnes',
                            departure: 'Marrakech'
                        },
                        en: {
                            name: 'Private transfer Marrakech ‚Äì Essaouira',
                            description: 'Enjoy a comfortable private van transfer from Marrakech to Essaouira for a small group of 1 to 4 people. Travel at your own pace with a professional driver while taking in the scenery between the Atlas Mountains and the ocean.',
                            price: 'On request',
                            duration: '2h30',
                            group: '1-4 people',
                            departure: 'Marrakech'
                        },
                        es: {
                            name: 'Traslado privado Marrakech ‚Äì Essaouira',
                            description: 'Disfrute de un c√≥modo traslado en furgoneta privada de Marrakech a Essaouira para un peque√±o grupo de 1 a 4 personas. Viaje a su ritmo con un conductor profesional mientras descubre los paisajes entre el Atlas y el oc√©ano.',
                            price: 'Bajo petici√≥n',
                            duration: '2h30',
                            group: '1-4 personas',
                            departure: 'Marrakech'
                        }
                    }
                },
                'transfert-agadir': {
                    translations: {
                        fr: {
                    name: 'Transfert priv√© Marrakech ‚Äì Agadir',
                    description: 'Rejoignez Agadir en toute s√©r√©nit√© gr√¢ce √† notre service de transfert en van priv√© depuis Marrakech, adapt√© aux petits groupes de 1 √† 4 personnes.',
                    price: 'Sur demande',
                    duration: '3h',
                            group: '1-4 personnes',
                            departure: 'Marrakech'
                        },
                        en: {
                            name: 'Private transfer Marrakech ‚Äì Agadir',
                            description: 'Reach Agadir with complete peace of mind thanks to our private van transfer service from Marrakech, ideal for small groups of 1 to 4 people.',
                            price: 'On request',
                            duration: '3h',
                            group: '1-4 people',
                            departure: 'Marrakech'
                        },
                        es: {
                            name: 'Traslado privado Marrakech ‚Äì Agadir',
                            description: 'Llegue a Agadir con total tranquilidad gracias a nuestro servicio de traslado en furgoneta privada desde Marrakech, ideal para grupos peque√±os de 1 a 4 personas.',
                            price: 'Bajo petici√≥n',
                            duration: '3h',
                            group: '1-4 personas',
                            departure: 'Marrakech'
                        }
                    }
                },
                'transfert-ouarzazate': {
                    translations: {
                        fr: {
                    name: 'Transfert priv√© Marrakech ‚Äì Ouarzazate',
                    description: 'Traversez le Haut Atlas en van priv√© pour un transfert inoubliable de Marrakech √† Ouarzazate. Con√ßu pour 1 √† 4 personnes.',
                    price: 'Sur demande',
                    duration: '4h',
                            group: '1-4 personnes',
                            departure: 'Marrakech'
                        },
                        en: {
                            name: 'Private transfer Marrakech ‚Äì Ouarzazate',
                            description: 'Cross the High Atlas in a private van for an unforgettable transfer from Marrakech to Ouarzazate. Designed for 1 to 4 people.',
                            price: 'On request',
                            duration: '4h',
                            group: '1-4 people',
                            departure: 'Marrakech'
                        },
                        es: {
                            name: 'Traslado privado Marrakech ‚Äì Uarzazat',
                            description: 'Cruce el Alto Atlas en una furgoneta privada para un traslado inolvidable de Marrakech a Uarzazat. Dise√±ado para 1 a 4 personas.',
                            price: 'Bajo petici√≥n',
                            duration: '4h',
                            group: '1-4 personas',
                            departure: 'Marrakech'
                        }
                    }
                },
                'transfert-casablanca': {
                    translations: {
                        fr: {
                    name: 'Transfert priv√© Marrakech ‚Äì Casablanca',
                    description: 'B√©n√©ficiez d\'un transfert rapide et confortable entre Marrakech et Casablanca, en van priv√© pour 1 √† 4 personnes.',
                    price: 'Sur demande',
                    duration: '3h',
                            group: '1-4 personnes',
                            departure: 'Marrakech'
                        },
                        en: {
                            name: 'Private transfer Marrakech ‚Äì Casablanca',
                            description: 'Enjoy a quick and comfortable transfer between Marrakech and Casablanca in a private van for 1 to 4 people.',
                            price: 'On request',
                            duration: '3h',
                            group: '1-4 people',
                            departure: 'Marrakech'
                        },
                        es: {
                            name: 'Traslado privado Marrakech ‚Äì Casablanca',
                            description: 'Disfrute de un traslado r√°pido y c√≥modo entre Marrakech y Casablanca en una furgoneta privada para 1 a 4 personas.',
                            price: 'Bajo petici√≥n',
                            duration: '3h',
                            group: '1-4 personas',
                            departure: 'Marrakech'
                        }
                    }
                },
                'excursion-ouzoud': {
                    translations: {
                        fr: {
                    name: 'Excursion d\'une journ√©e aux cascades d\'Ouzoud',
                    description: 'Offrez-vous une escapade rafra√Æchissante aux magnifiques cascades d\'Ouzoud, √† environ 2h30 de route de Marrakech.',
                    price: 'Sur demande',
                    duration: 'Journ√©e compl√®te',
                            group: '1-4 personnes',
                            departure: 'Marrakech'
                        },
                        en: {
                            name: 'Day trip to Ouzoud waterfalls',
                            description: 'Treat yourself to a refreshing getaway to the magnificent Ouzoud waterfalls, about a 2.5-hour drive from Marrakech.',
                            price: 'On request',
                            duration: 'Full day',
                            group: '1-4 people',
                            departure: 'Marrakech'
                        },
                        es: {
                            name: 'Excursi√≥n de un d√≠a a las cascadas de Ouzoud',
                            description: 'Reg√°lese una escapada refrescante a las magn√≠ficas cascadas de Ouzoud, a unas 2h30 de Marrakech.',
                            price: 'Bajo petici√≥n',
                            duration: 'D√≠a completo',
                            group: '1-4 personas',
                            departure: 'Marrakech'
                        }
                    }
                },
                'excursion-merzouga': {
                    translations: {
                        fr: {
                    name: 'Excursion priv√©e de 3 jours / 2 nuits au d√©sert de Merzouga',
                    description: 'Vivez une aventure inoubliable dans le d√©sert du Sahara avec notre circuit priv√© de 3 jours / 2 nuits vers Merzouga.',
                    price: 'Sur demande',
                    duration: '3 jours / 2 nuits',
                            group: '1-4 personnes',
                            departure: 'Marrakech'
                        },
                        en: {
                            name: 'Private 3-day / 2-night tour to the Merzouga Desert',
                            description: 'Experience an unforgettable adventure in the Sahara Desert with our private 3-day / 2-night tour to Merzouga.',
                            price: 'On request',
                            duration: '3 days / 2 nights',
                            group: '1-4 people',
                            departure: 'Marrakech'
                        },
                        es: {
                            name: 'Excursi√≥n privada de 3 d√≠as / 2 noches al desierto de Merzouga',
                            description: 'Viva una aventura inolvidable en el desierto del S√°hara con nuestro circuito privado de 3 d√≠as / 2 noches hacia Merzouga.',
                            price: 'Bajo petici√≥n',
                            duration: '3 d√≠as / 2 noches',
                            group: '1-4 personas',
                            departure: 'Marrakech'
                        }
                    }
                },
                'excursion-essaouira': {
                    basePrice: 140,
                    tags: ['essaouira'],
                    translations: {
                        fr: {
                    name: 'Essaouira - Excursion priv√©e d\'une journ√©e',
                    description: 'Une excursion priv√©e pleine de charme et de d√©tente √† Essaouira Mogador, la ville portuaire boh√®me bleue et blanche, c√©l√®bre pour sa vie culturelle dynamique, son port de p√™che traditionnel et sa m√©dina labyrinthique prot√©g√©e par des remparts du XVIIIe si√®cle en bord de mer. Profitez d\'une journ√©e agr√©able et reposante dans cette ville c√¥ti√®re unique, connue pour son ambiance d√©contract√©e, ses maisons color√©es, ses ruelles pittoresques, ses remparts historiques et sa m√©dina class√©e. Promenez-vous le long des quais, observez les p√™cheurs ramenant leur prise du jour √† bord de leurs bateaux, puis savourez du poisson frais et des fruits de mer dans l\'un des nombreux restaurants du port.',
                    price: '140 ‚Ç¨',
                    duration: '10 heures',
                    group: '1-4 personnes',
                            level: 'Facile',
                            departure: 'Marrakech',
                    included: [
                        'Prise en charge et retour √† votre h√¥tel',
                        'Transport priv√© en minivan neuf, climatis√©',
                        'Chauffeur professionnel multilingue'
                    ]
                        },
                        en: {
                            name: 'Essaouira ‚Äì Private day trip',
                            description: 'A charming and relaxing private day trip to Essaouira Mogador, the bohemian blue-and-white port city famous for its vibrant cultural life, traditional fishing harbor and medina guarded by 18th-century seafront ramparts. Enjoy a pleasant day in this unique coastal town known for its laid-back atmosphere, colourful houses, picturesque alleys, historic ramparts and UNESCO-listed medina. Stroll along the quays, watch fishermen bring in their daily catch, then taste fresh fish and seafood in one of the many restaurants by the port.',
                            price: '140 ‚Ç¨',
                            duration: '10 hours',
                            group: '1-4 people',
                            level: 'Easy',
                            departure: 'Marrakech',
                            included: [
                                'Pick-up and drop-off at your hotel',
                                'Private transport in a new air-conditioned minivan',
                                'Multilingual professional driver'
                            ]
                        },
                        es: {
                            name: 'Essaouira ‚Äì Excursi√≥n privada de un d√≠a',
                            description: 'Una excursi√≥n privada con encanto y relax a Essaouira Mogador, la ciudad portuaria bohemia azul y blanca famosa por su vibrante vida cultural, su puerto pesquero tradicional y su medina protegida por murallas del siglo XVIII frente al mar. Disfrute de un d√≠a agradable en esta ciudad costera √∫nica, conocida por su ambiente relajado, sus casas coloridas, sus callejones pintorescos, sus murallas hist√≥ricas y su medina declarada por la UNESCO. Pasee por los muelles, observe a los pescadores traer la captura del d√≠a y deguste pescado y marisco fresco en uno de los numerosos restaurantes del puerto.',
                            price: '140 ‚Ç¨',
                            duration: '10 horas',
                            group: '1-4 personas',
                            level: 'F√°cil',
                            departure: 'Marrakech',
                            included: [
                                'Recogida y regreso a su hotel',
                                'Transporte privado en minivan nuevo y climatizado',
                                'Conductor profesional multiling√ºe'
                            ]
                        }
                    }
                },
                'marrakech-city-tour': {
                    type: 'marrakech-city-tour',
                    translations: {
                        fr: {
                            name: 'Marrakech City Tour - Exp√©rience guid√©e priv√©e',
                            description: 'D√©couvrez Marrakech lors d\'un city tour priv√© avec votre guide professionnel. Cette visite flexible s\'adapte √† vos envies pour explorer les monuments embl√©matiques, les souks color√©s et les quartiers historiques.',
                            price: 'Sur demande',
                            duration: 'Selon l‚Äôoption choisie',
                            group: '1-4 personnes',
                            departure: 'Marrakech'
                        },
                        en: {
                            name: 'Marrakech City Tour - Private guided experience',
                            description: 'Discover Marrakech on a private city tour with your professional guide. This flexible visit adapts to your wishes to explore the city‚Äôs iconic monuments, colourful souks and historic districts.',
                            price: 'On request',
                            duration: 'Depending on the option chosen',
                            group: '1-4 people',
                            departure: 'Marrakech'
                        },
                        es: {
                            name: 'Marrakech City Tour - Experiencia guiada privada',
                            description: 'Descubra Marrakech en un city tour privado con su gu√≠a profesional. Esta visita flexible se adapta a sus deseos para explorar los monumentos emblem√°ticos, los zocos coloridos y los barrios hist√≥ricos de la ciudad.',
                            price: 'Bajo petici√≥n',
                            duration: 'Seg√∫n la opci√≥n elegida',
                            group: '1-4 personas',
                            departure: 'Marrakech'
                        }
                    }
                }
            };

            const fallbackTranslations = {
                fr: {
                    name: 'Activit√© s√©lectionn√©e',
                description: 'D√©couvrez les tr√©sors de Marrakech ! Du magnifique Palais Bahia aux paisibles Jardins Majorelle, chaque lieu raconte une histoire. Explorez les ruines du Palais El Badi√¢a, la beaut√© de la Madrasa Ben Youssef, et l‚Äôanimation de la Place Jama√¢ El Fna. Perdez-vous dans les souks color√©s, puis d√©tendez-vous au Caf√© Pacha. Une visite entre culture, charme et tradition.',
                    price: 'Prix sur demande',
                duration: '√Ä d√©finir',
                    group: '1-4 personnes',
                    departure: 'Marrakech'
                },
                en: {
                    name: 'Selected activity',
                    description: 'Discover the treasures of Marrakech! From the magnificent Bahia Palace to the peaceful Majorelle Gardens, every place tells a story. Explore the ruins of El Badi Palace, the beauty of the Ben Youssef Madrasa, and the energy of Jemaa El Fna Square. Wander through the colourful souks, then relax at Caf√© Pacha. A journey filled with culture, charm and tradition.',
                    price: 'Price on request',
                    duration: 'To be defined',
                    group: '1-4 people',
                    departure: 'Marrakech'
                },
                es: {
                    name: 'Actividad seleccionada',
                    description: 'Descubra los tesoros de Marrakech. Desde el magn√≠fico Palacio Bahia hasta los tranquilos Jardines Majorelle, cada lugar cuenta una historia. Explore las ruinas del Palacio El Badi, la belleza de la Madraza Ben Youssef y la animaci√≥n de la plaza Jemaa El Fna. Pi√©rdase en los coloridos zocos y rel√°jese despu√©s en el Caf√© Pacha. Una visita llena de cultura, encanto y tradici√≥n.',
                    price: 'Precio bajo petici√≥n',
                    duration: 'Por definir',
                    group: '1-4 personas',
                    departure: 'Marrakech'
                }
            };

            const config = activityDetails[activityId];
            const translation = config ? (config.translations[currentLang] || config.translations[defaultLang]) : null;
            const fallback = fallbackTranslations[currentLang] || fallbackTranslations[defaultLang];

            const parsedPriceParam = activityPrice ? parseFloat(String(activityPrice).replace(',', '.')) : NaN;

            if (translation) {
                const result = {
                    ...translation,
                    name: activityName || translation.name,
                    price: activityPrice || translation.price,
                    type: config.type || null,
                    basePrice: typeof config.basePrice === 'number' ? config.basePrice : null,
                    tags: config.tags || []
                };

                if (!Number.isNaN(parsedPriceParam)) {
                    result.basePrice = parsedPriceParam;
                }

                return result;
            }

            const fallbackResult = {
                ...fallback,
                name: activityName || fallback.name,
                price: activityPrice || fallback.price,
                type: null,
                basePrice: Number.isNaN(parsedPriceParam) ? null : parsedPriceParam,
                tags: []
            };

            const normalizedName = (activityName || '').toLowerCase();
            if (normalizedName.includes('city tour')) {
                fallbackResult.type = 'marrakech-city-tour';
            }
            if (normalizedName.includes('essaouira')) {
                fallbackResult.tags = ['essaouira'];
            }

            return fallbackResult;
        }

        // Currency helpers
        function formatCurrency(amountEur, code) {
            const rates = {
                mad: 10,
                eur: 1,
                usd: 1.09,
                cad: 1.48,
                gbp: 0.85
            };
            const symbols = { mad: 'MAD', eur: '‚Ç¨', usd: '$', cad: 'C$', gbp: '¬£' };
            const rate = rates[code] || 1;
            const converted = amountEur * rate;
            if (code === 'mad') return `${Math.round(converted)} ${symbols.mad}`;
            // Format without decimals for whole numbers
            if (converted % 1 === 0) {
                return `${Math.round(converted)} ${symbols[code] || ''}`.trim();
            }
            return `${converted.toFixed(2)} ${symbols[code] || ''}`.trim();
        }

        function updatePrices(code) {
            // Elements with data-price-eur
            document.querySelectorAll('[data-price-eur]')
                .forEach(el => {
                    const base = parseFloat(el.getAttribute('data-price-eur'));
                    if (!isNaN(base)) {
                        el.textContent = formatCurrency(base, code);
                    }
                });
        }

        function getStoredCurrency() {
            return localStorage.getItem('site_currency') || 'eur';
        }

        function populateActivityDetails() {
            const detailsContainer = document.getElementById('activity-details');
            if (!detailsContainer) return;

            const activity = getActivityDetails();
            const dict = getBookingDict();

            const urlParams = new URLSearchParams(window.location.search);
            const noDetails = urlParams.get('no-details') === 'true';

            if (noDetails) {
                const activityDetailsCard = detailsContainer.closest('.bg-white.rounded-2xl.shadow-lg');
                if (activityDetailsCard) {
                    activityDetailsCard.style.display = 'none';
                }
                const gridContainer = document.querySelector('.grid.grid-cols-1.lg\\:grid-cols-2');
                if (gridContainer) {
                    gridContainer.classList.remove('lg:grid-cols-2');
                    gridContainer.classList.add('lg:grid-cols-1', 'max-w-2xl', 'mx-auto');
                }
                return;
            }

            const priceLabel = dict['booking_page.details.price_label'] || 'Prix';
            const durationLabel = dict['booking_page.details.duration_label'] || 'Dur√©e';
            const groupLabel = dict['booking_page.details.group_label'] || 'Groupe';
            const levelLabel = dict['booking_page.details.level_label'] || 'Niveau';
            const levelTbd = dict['booking_page.details.level_tbd'] || '√Ä d√©finir';
            const departureLabel = dict['booking_page.details.departure_label'] || 'D√©part';
            const includedHeading = dict['booking_page.details.included_heading'] || 'Ce qui est inclus :';
            const payLaterText = dict['booking_page.details.pay_later'] || 'üîò R√©server maintenant et payer apr√®s';
            const groupDefault = dict['booking_page.tour.group_size'] || '1-4 personnes';
            const departureDefault = dict['booking_page.details.departure_value'] || 'Marrakech';

            const parsedPrice = typeof activity.basePrice === 'number'
                ? activity.basePrice
                : parseFloat(String(activity.price || '').replace(',', '.'));
            const hasNumericPrice = !Number.isNaN(parsedPrice);
            const priceDisplay = hasNumericPrice
                ? formatCurrency(parsedPrice, getStoredCurrency())
                : (activity.price || '');

            detailsContainer.dataset.priceBase = hasNumericPrice ? String(parsedPrice) : '';
            detailsContainer.dataset.priceFallback = activity.price || '';

            const isMarrakechCityTour = activity.type === 'marrakech-city-tour';
            const isEssaouiraExcursion = Array.isArray(activity.tags) && activity.tags.includes('essaouira');

            if (isMarrakechCityTour) {
                const chooseOption = dict['booking_page.tour.choose_option'] || 'Choisissez votre option :';
                const fullDayTitle = dict['booking_page.tour.full_day_title'] || 'Tour Guid√© : Une journ√©e compl√®te';
                const fullDayDescription = dict['booking_page.tour.full_day_description'] || 'D√©couvrez tous les sites embl√©matiques de Marrakech';
                const groupSizeText = dict['booking_page.tour.group_size'] || 'Groupe de 1-4 personnes';
                const halfDayTitle = dict['booking_page.tour.half_day_title'] || 'Tour Guid√© : Une demi journ√©e';
                const halfDayDescription = dict['booking_page.tour.half_day_description'] || 'Visite des sites principaux de la ville';
                const includedTitle = dict['booking_page.tour.included_title'] || 'Inclus';
                const notIncludedTitle = dict['booking_page.tour.not_included_title'] || 'Non inclus';
                const includedPickup = dict['booking_page.tour.included_pickup'] || 'Prise en charge de l\'H√¥tel, Riad ..';
                const includedTransport = dict['booking_page.tour.included_transport'] || 'Transport Priv√©';
                const includedWater = dict['booking_page.tour.included_water'] || 'Bouteille d\'eau';
                const includedGuide = dict['booking_page.tour.included_guide'] || 'Guide Professionnel';
                const notIncludedMuseums = dict['booking_page.tour.not_included_museums'] || 'Ticket des mus√©es';
                const notIncludedMeals = dict['booking_page.tour.not_included_meals'] || 'Repas';

                detailsContainer.innerHTML = `
                    <div class="border-b border-gray-200 pb-4">
                        <h3 class="text-xl font-bold text-dark mb-2">${activity.name}</h3>
                        <p class="text-gray-600 text-sm">${activity.description}</p>
                    </div>
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold text-dark mb-3">${chooseOption}</h4>
                        <div class="border border-gray-200 rounded-lg p-4 hover:border-primary transition-colors cursor-pointer" onclick="selectTourOption(event, 'full-day', 1700)">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-semibold text-dark mb-1">${fullDayTitle}</h5>
                                    <p class="text-sm text-gray-600 mb-2">${fullDayDescription}</p>
                                    <p class="text-sm text-gray-500">${groupSizeText}</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-lg font-bold text-primary" id="full-day-price">${formatCurrency(1700, getStoredCurrency())}</p>
                                </div>
                            </div>
                        </div>
                        <div class="border border-gray-200 rounded-lg p-4 hover:border-primary transition-colors cursor-pointer" onclick="selectTourOption(event, 'half-day', 1100)">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-semibold text-dark mb-1">${halfDayTitle}</h5>
                                    <p class="text-sm text-gray-600 mb-2">${halfDayDescription}</p>
                                    <p class="text-sm text-gray-500">${groupSizeText}</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-lg font-bold text-primary" id="half-day-price">${formatCurrency(1100, getStoredCurrency())}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-8 space-y-6">
                        <div class="bg-green-50 rounded-lg p-4">
                            <h4 class="text-lg font-semibold text-dark mb-4 flex items-center">
                                <i class="fas fa-check-circle text-green-500 mr-2"></i>
                                ${includedTitle}
                            </h4>
                            <ul class="space-y-2 text-sm text-gray-700">
                                <li class="flex items-start">
                                    <i class="fas fa-check text-green-500 mt-1 mr-2 text-xs"></i>
                                    <span>${includedPickup}</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check text-green-500 mt-1 mr-2 text-xs"></i>
                                    <span>${includedTransport}</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check text-green-500 mt-1 mr-2 text-xs"></i>
                                    <span>${includedWater}</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check text-green-500 mt-1 mr-2 text-xs"></i>
                                    <span>${includedGuide}</span>
                                </li>
                            </ul>
                        </div>
                        <div class="bg-red-50 rounded-lg p-4">
                            <h4 class="text-lg font-semibold text-dark mb-4 flex items-center">
                                <i class="fas fa-times-circle text-red-500 mr-2"></i>
                                ${notIncludedTitle}
                            </h4>
                            <ul class="space-y-2 text-sm text-gray-700">
                                <li class="flex items-start">
                                    <i class="fas fa-times text-red-500 mt-1 mr-2 text-xs"></i>
                                    <span>${notIncludedMuseums}</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-times text-red-500 mt-1 mr-2 text-xs"></i>
                                    <span>${notIncludedMeals}</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                `;
                return;
            }

            if (isEssaouiraExcursion && Array.isArray(activity.included)) {
                const levelValue = activity.level || levelTbd;
                const includesList = activity.included.map(item => `
                    <li class="flex items-start">
                        <i class="fas fa-check text-green-500 mt-1 mr-2 text-xs"></i>
                        <span>${item}</span>
                    </li>
                `).join('');

                    detailsContainer.innerHTML = `
                        <div class="border-b border-gray-200 pb-4">
                            <h3 class="text-xl font-bold text-dark mb-2">${activity.name}</h3>
                            <p class="text-gray-600 text-sm">${activity.description}</p>
                        </div>
                        <div class="grid grid-cols-2 gap-4 mb-6">
                            <div class="bg-gray-50 p-3 rounded-lg">
                            <span class="text-sm text-gray-600">${priceLabel}</span>
                            <p class="font-bold text-primary" id="activity-price">${priceDisplay}</p>
                            </div>
                            <div class="bg-gray-50 p-3 rounded-lg">
                            <span class="text-sm text-gray-600">${durationLabel}</span>
                            <p class="font-bold text-dark">${activity.duration || ''}</p>
                            </div>
                            <div class="bg-gray-50 p-3 rounded-lg">
                            <span class="text-sm text-gray-600">${levelLabel}</span>
                            <p class="font-bold text-dark">${levelValue}</p>
                            </div>
                            <div class="bg-gray-50 p-3 rounded-lg">
                            <span class="text-sm text-gray-600">${groupLabel}</span>
                            <p class="font-bold text-dark">${activity.group || groupDefault}</p>
                            </div>
                        </div>
                        <div class="bg-green-50 rounded-lg p-4 mb-4">
                            <h4 class="text-lg font-semibold text-dark mb-4 flex items-center">
                                <i class="fas fa-check-circle text-green-500 mr-2"></i>
                            ${includedHeading}
                            </h4>
                            <ul class="space-y-2 text-sm text-gray-700">
                            ${includesList}
                            </ul>
                        </div>
                        <div class="p-4 bg-primary/10 rounded-lg">
                        <p class="text-primary font-bold text-sm">${payLaterText}</p>
                        </div>
                    `;
                return;
            }

                    detailsContainer.innerHTML = `
                        <div class="border-b border-gray-200 pb-4">
                            <h3 class="text-xl font-bold text-dark mb-2">${activity.name}</h3>
                            <p class="text-gray-600 text-sm">${activity.description}</p>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-gray-50 p-3 rounded-lg">
                        <span class="text-sm text-gray-600">${priceLabel}</span>
                        <p class="font-bold text-primary" id="activity-price">${priceDisplay}</p>
                            </div>
                            <div class="bg-gray-50 p-3 rounded-lg">
                        <span class="text-sm text-gray-600">${durationLabel}</span>
                        <p class="font-bold text-dark">${activity.duration || ''}</p>
                            </div>
                            <div class="bg-gray-50 p-3 rounded-lg">
                        <span class="text-sm text-gray-600">${groupLabel}</span>
                        <p class="font-bold text-dark">${activity.group || groupDefault}</p>
                            </div>
                            <div class="bg-gray-50 p-3 rounded-lg">
                        <span class="text-sm text-gray-600">${departureLabel}</span>
                        <p class="font-bold text-dark">${activity.departure || departureDefault}</p>
                            </div>
                        </div>
                        <div class="mt-6 p-4 bg-primary/10 rounded-lg">
                    <p class="text-primary font-bold text-sm">${payLaterText}</p>
                        </div>
                    `;
        }

        window.addEventListener('storage', (e) => {
            if (e.key !== 'site_currency') return;
            const code = e.newValue || 'eur';
            const detailsContainer = document.getElementById('activity-details');
            if (!detailsContainer) return;

            const priceEl = document.getElementById('activity-price');
            const baseValue = parseFloat(detailsContainer.dataset.priceBase || '');
            const fallbackPrice = detailsContainer.dataset.priceFallback || '';

            if (priceEl) {
                if (!Number.isNaN(baseValue)) {
                    priceEl.textContent = formatCurrency(baseValue, code);
                } else if (fallbackPrice) {
                    priceEl.textContent = fallbackPrice;
                }
            }

            const fullDayPriceEl = document.getElementById('full-day-price');
            if (fullDayPriceEl) {
                fullDayPriceEl.textContent = formatCurrency(1700, code);
            }

            const halfDayPriceEl = document.getElementById('half-day-price');
            if (halfDayPriceEl) {
                halfDayPriceEl.textContent = formatCurrency(1100, code);
            }
        });

        // Handle tour option selection
        function selectTourOption(evt, option, price) {
            // Remove previous selection styling
            document.querySelectorAll('.border-primary').forEach(el => {
                el.classList.remove('border-primary', 'bg-primary/5');
                el.classList.add('border-gray-200');
            });
            
            // Add selection styling to clicked option
            const selectedOption = evt.currentTarget;
            selectedOption.classList.remove('border-gray-200');
            selectedOption.classList.add('border-primary', 'bg-primary/5');
            
            // Store selected option and price
            localStorage.setItem('selectedTourOption', option);
            localStorage.setItem('selectedTourPrice', price);
            
            // Update form with selected option
            const form = document.getElementById('booking-form');
            let tourOptionInput = form.querySelector('input[name="tour_option"]');
            if (!tourOptionInput) {
                tourOptionInput = document.createElement('input');
                tourOptionInput.type = 'hidden';
                tourOptionInput.name = 'tour_option';
                form.appendChild(tourOptionInput);
            }
            tourOptionInput.value = option;
        }

        // Handle form submission
        document.getElementById('booking-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const dict = getBookingDict();
            const submitBtn = this.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            
            // Show loading state
            const loadingText = dict['booking_page.form.loading'] || '‚è≥ Envoi en cours...';
            submitBtn.innerHTML = loadingText;
            submitBtn.disabled = true;
            
            const formData = new FormData(this);
            const bookingData = Object.fromEntries(formData.entries());
            
            // Get activity details from URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const defaultActivityName = dict['booking_page.email.activity_default'] || 'Activit√© s√©lectionn√©e';
            const defaultPriceText = dict['booking_page.email.price_request'] || 'Prix sur demande';
            const activityName = urlParams.get('name') || defaultActivityName;
            const activityPrice = urlParams.get('price') || defaultPriceText;
            const activityId = urlParams.get('activity') || 'N/A';
            
            // Get country code and phone
            const countryCode = formData.get('country_code') || '+212';
            const phone = formData.get('phone');
            const fullPhone = countryCode + ' ' + phone;
            
            // Create email content
            const subjectPrefix = dict['booking_page.email.subject_prefix'] || 'R√©servation - ';
            const subject = encodeURIComponent(`${subjectPrefix}${activityName}`);
            const notProvided = dict['booking_page.email.not_provided'] || 'Non sp√©cifi√©';
            const noMessageText = dict['booking_page.email.no_message'] || 'Aucun message';
            const newBookingHeader = dict['booking_page.email.new_booking'] || 'Nouvelle r√©servation re√ßue :';
            const activityLabel = dict['booking_page.email.activity_label'] || 'üè∑Ô∏è Activit√© :';
            const activityIdLabel = dict['booking_page.email.activity_id_label'] || 'üÜî ID Activit√© :';
            const priceLabelMail = dict['booking_page.email.price_label'] || 'üí∞ Prix :';
            const firstNameLabel = dict['booking_page.email.first_name_label'] || 'üë§ Pr√©nom :';
            const lastNameLabel = dict['booking_page.email.last_name_label'] || 'üë§ Nom :';
            const emailLabel = dict['booking_page.email.email_label'] || 'üìß Email :';
            const phoneLabel = dict['booking_page.email.phone_label'] || 'üìû T√©l√©phone :';
            const departureLabelMail = dict['booking_page.email.departure_label'] || 'üìÖ Date de d√©part :';
            const participantsLabel = dict['booking_page.email.participants_label'] || 'üë• Nombre de personnes :';
            const pickupLabel = dict['booking_page.email.pickup_label'] || 'üè® Lieu de prise en charge :';
            const messageLabel = dict['booking_page.email.message_label'] || 'üí¨ Message :';
            const separator = dict['booking_page.email.separator'] || '---';
            const sentFromNote = dict['booking_page.email.sent_from'] || 'Cette r√©servation a √©t√© envoy√©e depuis la page de r√©servation.';

            const emailLines = [
                newBookingHeader,
                '',
                `${activityLabel} ${activityName}`,
                `${activityIdLabel} ${activityId}`,
                `${priceLabelMail} ${activityPrice}`,
                '',
                `${firstNameLabel} ${bookingData.firstName || notProvided}`,
                `${lastNameLabel} ${bookingData.lastName || notProvided}`,
                `${emailLabel} ${bookingData.email || notProvided}`,
                `${phoneLabel} ${phone ? fullPhone : notProvided}`,
                '',
                `${departureLabelMail} ${bookingData.departureDate || notProvided}`,
                `${participantsLabel} ${bookingData.participants || notProvided}`,
                `${pickupLabel} ${bookingData.pickupLocation || notProvided}`,
                '',
                `${messageLabel}`,
                `${(bookingData.message && bookingData.message.trim()) ? bookingData.message : noMessageText}`,
                '',
                separator,
                sentFromNote
            ].join('\n');

            // Use mailto link to send email
            const body = encodeURIComponent(emailLines);
            const mailtoLink = `mailto:Wehostmorocco@gmail.com?subject=${subject}&body=${body}`;
            try {
                window.location.href = mailtoLink;
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 1000);
            } catch (error) {
                console.error('Error opening email client:', error);
                alert(dict['booking_page.form.error'] || 'Une erreur est survenue. Veuillez r√©essayer.');
            }
            
            // Reset button state
            setTimeout(() => {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }, 2000);
        });

        // Navbar scroll behavior for mobile
        (function() {
            let lastScrollTop = 0;
            const navbar = document.getElementById('navbar');
            const scrollThreshold = 50; // Minimum scroll distance to trigger hide/show
            
            if (!navbar) return;

            function handleScroll() {
                const currentScrollTop = window.pageYOffset || document.documentElement.scrollTop;
                
                // Only apply on mobile devices
                if (window.innerWidth <= 1023) {
                    if (currentScrollTop > lastScrollTop && currentScrollTop > scrollThreshold) {
                        // Scrolling down - hide navbar
                        navbar.classList.remove('navbar-visible');
                        navbar.classList.add('navbar-hidden');
                    } else if (currentScrollTop < lastScrollTop) {
                        // Scrolling up - show navbar
                        navbar.classList.remove('navbar-hidden');
                        navbar.classList.add('navbar-visible');
                    }
                } else {
                    // On desktop, always show navbar
                    navbar.classList.remove('navbar-hidden', 'navbar-visible');
                }
                
                lastScrollTop = currentScrollTop;
            }

            // Add scroll event listener
            window.addEventListener('scroll', handleScroll, { passive: true });
            
            // Initialize navbar state
            navbar.classList.add('navbar-visible');
        })();

        // Mobile menu functionality
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            if (!mobileMenuButton || !mobileMenu) {
                console.warn('Mobile menu elements not found');
                return;
            }

            // Toggle mobile menu
            mobileMenuButton.addEventListener('click', function (e) {
                e.preventDefault();
                e.stopPropagation();
                
                const isHidden = mobileMenu.classList.contains('hidden');
                
                if (isHidden) {
                    mobileMenu.classList.remove('hidden');
                    mobileMenuButton.setAttribute('aria-expanded', 'true');
                    // Change icon to X when menu is open
                    const icon = mobileMenuButton.querySelector('i');
                    if (icon) {
                        icon.className = 'fas fa-times text-xl';
                    }
                } else {
                    mobileMenu.classList.add('hidden');
                    mobileMenuButton.setAttribute('aria-expanded', 'false');
                    // Change icon back to hamburger when menu is closed
                    const icon = mobileMenuButton.querySelector('i');
                    if (icon) {
                        icon.className = 'fas fa-bars text-xl';
                    }
                }
            });

            // Close mobile menu when clicking outside
            document.addEventListener('click', function (e) {
                if (!mobileMenuButton.contains(e.target) && !mobileMenu.contains(e.target)) {
                    if (!mobileMenu.classList.contains('hidden')) {
                        mobileMenu.classList.add('hidden');
                        mobileMenuButton.setAttribute('aria-expanded', 'false');
                        // Reset icon
                        const icon = mobileMenuButton.querySelector('i');
                        if (icon) {
                            icon.className = 'fas fa-bars text-xl';
                        }
                    }
                }
            });

            // Close mobile menu on window resize to desktop
            window.addEventListener('resize', function () {
                if (window.innerWidth >= 1024) { // lg breakpoint
                    mobileMenu.classList.add('hidden');
                    mobileMenuButton.setAttribute('aria-expanded', 'false');
                    // Reset icon
                    const icon = mobileMenuButton.querySelector('i');
                    if (icon) {
                        icon.className = 'fas fa-bars text-xl';
                    }
                }
            });
        });

        // Close mobile menu on scroll
        let lastScrollTop = 0;
        window.addEventListener('scroll', function () {
            const currentScrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileMenuButton = document.getElementById('mobile-menu-button');

            // Close mobile menu when scrolling (in any direction)
            if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
                mobileMenu.classList.add('hidden');
                if (mobileMenuButton) {
                    mobileMenuButton.setAttribute('aria-expanded', 'false');
                    // Reset icon
                    const icon = mobileMenuButton.querySelector('i');
                    if (icon) {
                        icon.className = 'fas fa-bars text-xl';
                    }
                }
            }

            lastScrollTop = currentScrollTop;
        });

        // Language & currency handling
        (function() {
            // Desktop dropdowns
            const langDropdownBtn = document.getElementById('langDropdownBtn');
            const currencyDropdownBtn = document.getElementById('currencyDropdownBtn');
            const currentLang = document.getElementById('currentLang');
            const currentCurrency = document.getElementById('currentCurrency');
            
            // Mobile dropdowns
            const mobileLangDropdownBtn = document.getElementById('mobileLangDropdownBtn');
            const mobileCurrencyDropdownBtn = document.getElementById('mobileCurrencyDropdownBtn');
            const mobileCurrentLang = document.getElementById('mobileCurrentLang');
            const mobileCurrentCurrency = document.getElementById('mobileCurrentCurrency');
            
            // Mobile dropdown content
            const mobileLangDropdown = document.getElementById('mobileLangDropdown');
            const mobileCurrencyDropdown = document.getElementById('mobileCurrencyDropdown');

            if (!langDropdownBtn || !currencyDropdownBtn || !mobileLangDropdownBtn || !mobileCurrencyDropdownBtn) return;

            const storedLang = localStorage.getItem('site_lang') || 'en';
            
            // Force EUR as default if no currency is set or if MAD is stored
            if (!localStorage.getItem('site_currency') || localStorage.getItem('site_currency') === 'mad') {
                localStorage.setItem('site_currency', 'eur');
            }
            const storedCurrency = localStorage.getItem('site_currency');

            // Language mapping
            const langNames = {
                fr: 'Fran√ßais',
                en: 'English',
                es: 'Espa√±ol'
            };

            // Currency mapping
            const currencyNames = {
                mad: 'MAD',
                eur: 'EUR',
                usd: 'USD',
                cad: 'CAD',
                gbp: 'GBP'
            };

            // Initialize displays
            currentLang.textContent = storedLang.toUpperCase();
            currentCurrency.textContent = storedCurrency.toUpperCase();
            mobileCurrentLang.textContent = langNames[storedLang];
            mobileCurrentCurrency.textContent = storedCurrency.toUpperCase();
            
            document.documentElement.lang = storedLang;

            const i18n = {
                fr: {
                    'labels.languages': 'Langues:',
                    'labels.currency': 'Devise:',
                    'nav.home': 'Accueil',
                    'nav.services': 'Services',
                    'nav.reviews': 'Avis',
                    'nav.booking': 'R√©servation',
                    'nav.contact': 'Contact',
                    'cta.book': 'R√©server',
                    'cta.book_now': 'R√©server maintenant',
                    'footer.follow': 'Suivez nous :',
                    'footer.contact': 'Contact',
                    'footer.location': 'Marrakech, Maroc',
                    'footer.copyright': '&copy; 2025 WeHostMorocco. Tous droits r√©serv√©s.',
                    'booking_page.meta.title': 'R√©servation - MarrakechStay',
                    'booking_page.hero.title': 'üìã R√©servation',
                    'booking_page.hero.subtitle': 'Compl√©tez votre r√©servation en toute s√©curit√©',
                    'booking_page.details.title': 'üìã D√©tails de l\'activit√©',
                    'booking_page.details.pay_later': 'üîò R√©server maintenant et payer apr√®s',
                    'booking_page.form.title': 'üë§ Informations personnelles',
                    'booking_page.form.first_name_label': 'Pr√©nom *',
                    'booking_page.form.first_name_placeholder': 'Votre pr√©nom',
                    'booking_page.form.last_name_label': 'Nom *',
                    'booking_page.form.last_name_placeholder': 'Votre nom',
                    'booking_page.form.email_label': 'üìß Email *',
                    'booking_page.form.email_placeholder': 'Votre adresse email',
                    'booking_page.form.phone_label': 'üìû T√©l√©phone *',
                    'booking_page.form.phone_placeholder': 'Votre num√©ro',
                    'booking_page.form.departure_date_label': 'üìÖ Date de d√©part *',
                    'booking_page.form.departure_date_placeholder': 'S√©lectionnez votre date',
                    'booking_page.form.participants_label': 'üë• Nombre de personnes *',
                    'booking_page.form.participants_placeholder': 'Nombre de personnes',
                    'booking_page.form.pickup_label': 'üè® Lieu de prise en charge',
                    'booking_page.form.pickup_placeholder': 'Adresse de votre h√¥tel/riad',
                    'booking_page.form.message_label': 'üí¨ Message (optionnel)',
                    'booking_page.form.message_placeholder': 'Demandes sp√©ciales, questions, etc.',
                    'booking_page.conditions.title': 'üìã Conditions de r√©servation',
                    'booking_page.conditions.free_cancellation': '‚Ä¢ R√©servation gratuite, paiement √† l\'arriv√©e',
                    'booking_page.form.submit': 'üîò Confirmer ma r√©servation',
                    'booking_page.footer.services.title': 'Services',
                    'booking_page.footer.services.transfer': 'Transfert A√©roport',
                    'booking_page.footer.services.excursions': 'Excursions & Tours',
                    'booking_page.footer.services.stays': 'H√©bergement',
                    'booking_page.footer.services.guide': 'Guide Local',
                    'booking_page.footer.info.title': 'Informations',
                    'booking_page.footer.info.about': '√Ä propos',
                    'booking_page.footer.info.faq': 'FAQ',
                    'booking_page.footer.info.blog': 'Blog voyage',
                    'booking_page.footer.info.testimonials': 'T√©moignages',
                    'booking_page.tour.choose_option': 'Choisissez votre option :',
                    'booking_page.tour.full_day_title': 'Tour Guid√© : Une journ√©e compl√®te',
                    'booking_page.tour.full_day_description': 'D√©couvrez tous les sites embl√©matiques de Marrakech',
                    'booking_page.tour.group_size': 'Groupe de 1-4 personnes',
                    'booking_page.tour.half_day_title': 'Tour Guid√© : Une demi journ√©e',
                    'booking_page.tour.half_day_description': 'Visite des sites principaux de la ville',
                    'booking_page.tour.included_title': 'Inclus',
                    'booking_page.tour.not_included_title': 'Non inclus',
                    'booking_page.tour.included_pickup': 'Prise en charge de l\'H√¥tel, Riad ..',
                    'booking_page.tour.included_transport': 'Transport Priv√©',
                    'booking_page.tour.included_water': 'Bouteille d\'eau',
                    'booking_page.tour.included_guide': 'Guide Professionnel',
                    'booking_page.tour.not_included_museums': 'Ticket des mus√©es',
                    'booking_page.tour.not_included_meals': 'Repas',
                    'booking_page.details.price_label': 'Prix',
                    'booking_page.details.duration_label': 'Dur√©e',
                    'booking_page.details.level_label': 'Niveau',
                    'booking_page.details.level_tbd': '√Ä d√©finir',
                    'booking_page.details.group_label': 'Groupe',
                    'booking_page.details.departure_label': 'D√©part',
                    'booking_page.details.included_heading': 'Ce qui est inclus :',
                    'booking_page.details.departure_value': 'Marrakech',
                    'booking_page.form.loading': '‚è≥ Envoi en cours...',
                    'booking_page.email.subject_prefix': 'R√©servation - ',
                    'booking_page.email.activity_default': 'Activit√© s√©lectionn√©e',
                    'booking_page.email.price_request': 'Prix sur demande',
                    'booking_page.email.not_provided': 'Non sp√©cifi√©',
                    'booking_page.email.no_message': 'Aucun message',
                    'booking_page.email.new_booking': 'Nouvelle r√©servation re√ßue :',
                    'booking_page.email.activity_label': 'üè∑Ô∏è Activit√© :',
                    'booking_page.email.activity_id_label': 'üÜî ID Activit√© :',
                    'booking_page.email.price_label': 'üí∞ Prix :',
                    'booking_page.email.first_name_label': 'üë§ Pr√©nom :',
                    'booking_page.email.last_name_label': 'üë§ Nom :',
                    'booking_page.email.email_label': 'üìß Email :',
                    'booking_page.email.phone_label': 'üìû T√©l√©phone :',
                    'booking_page.email.departure_label': 'üìÖ Date de d√©part :',
                    'booking_page.email.participants_label': 'üë• Nombre de personnes :',
                    'booking_page.email.pickup_label': 'üè® Lieu de prise en charge :',
                    'booking_page.email.message_label': 'üí¨ Message :',
                    'booking_page.email.separator': '---',
                    'booking_page.email.sent_from': 'Cette r√©servation a √©t√© envoy√©e depuis la page de r√©servation.'
                },
                en: {
                    'labels.languages': 'Languages:',
                    'labels.currency': 'Currency:',
                    'nav.home': 'Home',
                    'nav.services': 'Services',
                    'nav.reviews': 'Reviews',
                    'nav.booking': 'Booking',
                    'nav.contact': 'Contact',
                    'cta.book': 'Book',
                    'cta.book_now': 'Book now',
                    'footer.follow': 'Follow us:',
                    'footer.contact': 'Contact',
                    'footer.location': 'Marrakech, Morocco',
                    'footer.copyright': '&copy; 2025 WeHostMorocco. All rights reserved.',
                    'booking_page.meta.title': 'Booking - MarrakechStay',
                    'booking_page.hero.title': 'üìã Booking',
                    'booking_page.hero.subtitle': 'Complete your booking securely',
                    'booking_page.details.title': 'üìã Activity details',
                    'booking_page.details.pay_later': 'üîò Book now and pay later',
                    'booking_page.form.title': 'üë§ Personal information',
                    'booking_page.form.first_name_label': 'First name *',
                    'booking_page.form.first_name_placeholder': 'Your first name',
                    'booking_page.form.last_name_label': 'Last name *',
                    'booking_page.form.last_name_placeholder': 'Your last name',
                    'booking_page.form.email_label': 'üìß Email *',
                    'booking_page.form.email_placeholder': 'Your email address',
                    'booking_page.form.phone_label': 'üìû Phone *',
                    'booking_page.form.phone_placeholder': 'Your phone number',
                    'booking_page.form.departure_date_label': 'üìÖ Departure date *',
                    'booking_page.form.departure_date_placeholder': 'Select your date',
                    'booking_page.form.participants_label': 'üë• Number of people *',
                    'booking_page.form.participants_placeholder': 'Number of people',
                    'booking_page.form.pickup_label': 'üè® Pickup location',
                    'booking_page.form.pickup_placeholder': 'Your hotel/riad address',
                    'booking_page.form.message_label': 'üí¨ Message (optional)',
                    'booking_page.form.message_placeholder': 'Special requests, questions, etc.',
                    'booking_page.conditions.title': 'üìã Booking conditions',
                    'booking_page.conditions.free_cancellation': '‚Ä¢ Free booking, pay on arrival',
                    'booking_page.form.submit': 'üîò Confirm my booking',
                    'booking_page.footer.services.title': 'Services',
                    'booking_page.footer.services.transfer': 'Airport transfer',
                    'booking_page.footer.services.excursions': 'Excursions & Tours',
                    'booking_page.footer.services.stays': 'Accommodation',
                    'booking_page.footer.services.guide': 'Local guide',
                    'booking_page.footer.info.title': 'Information',
                    'booking_page.footer.info.about': 'About',
                    'booking_page.footer.info.faq': 'FAQ',
                    'booking_page.footer.info.blog': 'Travel blog',
                    'booking_page.footer.info.testimonials': 'Testimonials',
                    'booking_page.tour.choose_option': 'Choose your option:',
                    'booking_page.tour.full_day_title': 'Guided tour: Full day',
                    'booking_page.tour.full_day_description': 'Discover all the iconic sights of Marrakech',
                    'booking_page.tour.group_size': 'Group of 1-4 people',
                    'booking_page.tour.half_day_title': 'Guided tour: Half day',
                    'booking_page.tour.half_day_description': 'Visit the main highlights of the city',
                    'booking_page.tour.included_title': 'Included',
                    'booking_page.tour.not_included_title': 'Not included',
                    'booking_page.tour.included_pickup': 'Hotel / riad pick-up',
                    'booking_page.tour.included_transport': 'Private transport',
                    'booking_page.tour.included_water': 'Bottled water',
                    'booking_page.tour.included_guide': 'Professional guide',
                    'booking_page.tour.not_included_museums': 'Museum tickets',
                    'booking_page.tour.not_included_meals': 'Meals',
                    'booking_page.details.price_label': 'Price',
                    'booking_page.details.duration_label': 'Duration',
                    'booking_page.details.level_label': 'Level',
                    'booking_page.details.level_tbd': 'To be defined',
                    'booking_page.details.group_label': 'Group',
                    'booking_page.details.departure_label': 'Departure',
                    'booking_page.details.included_heading': 'What\'s included:',
                    'booking_page.details.departure_value': 'Marrakech',
                    'booking_page.form.loading': '‚è≥ Sending...',
                    'booking_page.email.subject_prefix': 'Booking - ',
                    'booking_page.email.activity_default': 'Selected activity',
                    'booking_page.email.price_request': 'Price on request',
                    'booking_page.email.not_provided': 'Not provided',
                    'booking_page.email.no_message': 'No message',
                    'booking_page.email.new_booking': 'New booking received:',
                    'booking_page.email.activity_label': 'üè∑Ô∏è Activity :',
                    'booking_page.email.activity_id_label': 'üÜî Activity ID :',
                    'booking_page.email.price_label': 'üí∞ Price :',
                    'booking_page.email.first_name_label': 'üë§ First name :',
                    'booking_page.email.last_name_label': 'üë§ Last name :',
                    'booking_page.email.email_label': 'üìß Email :',
                    'booking_page.email.phone_label': 'üìû Phone :',
                    'booking_page.email.departure_label': 'üìÖ Departure date :',
                    'booking_page.email.participants_label': 'üë• Number of people :',
                    'booking_page.email.pickup_label': 'üè® Pickup location :',
                    'booking_page.email.message_label': 'üí¨ Message :',
                    'booking_page.email.separator': '---',
                    'booking_page.email.sent_from': 'This booking was sent from the booking page.'
                },
                es: {
                    'labels.languages': 'Idiomas:',
                    'labels.currency': 'Moneda:',
                    'nav.home': 'Inicio',
                    'nav.services': 'Servicios',
                    'nav.reviews': 'Rese√±as',
                    'nav.booking': 'Reserva',
                    'nav.contact': 'Contacto',
                    'cta.book': 'Reservar',
                    'cta.book_now': 'Reservar ahora',
                    'footer.follow': 'S√≠guenos:',
                    'footer.contact': 'Contacto',
                    'footer.location': 'Marrakech, Marruecos',
                    'footer.copyright': '&copy; 2025 WeHostMorocco. Todos los derechos reservados.',
                    'booking_page.meta.title': 'Reserva - MarrakechStay',
                    'booking_page.hero.title': 'üìã Reserva',
                    'booking_page.hero.subtitle': 'Complete su reserva con tranquilidad',
                    'booking_page.details.title': 'üìã Detalles de la actividad',
                    'booking_page.details.pay_later': 'üîò Reserve ahora y paga despu√©s',
                    'booking_page.form.title': 'üë§ Informaci√≥n personal',
                    'booking_page.form.first_name_label': 'Nombre *',
                    'booking_page.form.first_name_placeholder': 'Su nombre',
                    'booking_page.form.last_name_label': 'Apellido *',
                    'booking_page.form.last_name_placeholder': 'Su apellido',
                    'booking_page.form.email_label': 'üìß Correo electr√≥nico *',
                    'booking_page.form.email_placeholder': 'Su correo electr√≥nico',
                    'booking_page.form.phone_label': 'üìû Tel√©fono *',
                    'booking_page.form.phone_placeholder': 'Su n√∫mero de tel√©fono',
                    'booking_page.form.departure_date_label': 'üìÖ Fecha de salida *',
                    'booking_page.form.departure_date_placeholder': 'Seleccione su fecha',
                    'booking_page.form.participants_label': 'üë• N√∫mero de personas *',
                    'booking_page.form.participants_placeholder': 'N√∫mero de personas',
                    'booking_page.form.pickup_label': 'üè® Lugar de recogida',
                    'booking_page.form.pickup_placeholder': 'Direcci√≥n de su hotel/riad',
                    'booking_page.form.message_label': 'üí¨ Mensaje (opcional)',
                    'booking_page.form.message_placeholder': 'Solicitudes especiales, preguntas, etc.',
                    'booking_page.conditions.title': 'üìã Condiciones de reserva',
                    'booking_page.conditions.free_cancellation': '‚Ä¢ Reserva gratuita, pago a la llegada',
                    'booking_page.form.submit': 'üîò Confirmar mi reserva',
                    'booking_page.footer.services.title': 'Servicios',
                    'booking_page.footer.services.transfer': 'Traslado al aeropuerto',
                    'booking_page.footer.services.excursions': 'Excursiones y tours',
                    'booking_page.footer.services.stays': 'Alojamiento',
                    'booking_page.footer.services.guide': 'Gu√≠a local',
                    'booking_page.footer.info.title': 'Informaci√≥n',
                    'booking_page.footer.info.about': 'Acerca de',
                    'booking_page.footer.info.faq': 'Preguntas frecuentes',
                    'booking_page.footer.info.blog': 'Blog de viajes',
                    'booking_page.footer.info.testimonials': 'Testimonios',
                    'booking_page.tour.choose_option': 'Elija su opci√≥n:',
                    'booking_page.tour.full_day_title': 'Tour guiado: D√≠a completo',
                    'booking_page.tour.full_day_description': 'Descubra todos los lugares emblem√°ticos de Marrakech',
                    'booking_page.tour.group_size': 'Grupo de 1-4 personas',
                    'booking_page.tour.half_day_title': 'Tour guiado: Medio d√≠a',
                    'booking_page.tour.half_day_description': 'Visite los principales atractivos de la ciudad',
                    'booking_page.tour.included_title': 'Incluido',
                    'booking_page.tour.not_included_title': 'No incluido',
                    'booking_page.tour.included_pickup': 'Recogida en hotel o riad',
                    'booking_page.tour.included_transport': 'Transporte privado',
                    'booking_page.tour.included_water': 'Botella de agua',
                    'booking_page.tour.included_guide': 'Gu√≠a profesional',
                    'booking_page.tour.not_included_museums': 'Entradas a museos',
                    'booking_page.tour.not_included_meals': 'Comidas',
                    'booking_page.details.price_label': 'Precio',
                    'booking_page.details.duration_label': 'Duraci√≥n',
                    'booking_page.details.level_label': 'Nivel',
                    'booking_page.details.level_tbd': 'Por definir',
                    'booking_page.details.group_label': 'Grupo',
                    'booking_page.details.departure_label': 'Salida',
                    'booking_page.details.included_heading': 'Qu√© est√° incluido:',
                    'booking_page.details.departure_value': 'Marrakech',
                    'booking_page.form.loading': '‚è≥ Enviando...',
                    'booking_page.email.subject_prefix': 'Reserva - ',
                    'booking_page.email.activity_default': 'Actividad seleccionada',
                    'booking_page.email.price_request': 'Precio bajo petici√≥n',
                    'booking_page.email.not_provided': 'No especificado',
                    'booking_page.email.no_message': 'Sin mensaje',
                    'booking_page.email.new_booking': 'Nueva reserva recibida:',
                    'booking_page.email.activity_label': 'üè∑Ô∏è Actividad :',
                    'booking_page.email.activity_id_label': 'üÜî ID de la actividad :',
                    'booking_page.email.price_label': 'üí∞ Precio :',
                    'booking_page.email.first_name_label': 'üë§ Nombre :',
                    'booking_page.email.last_name_label': 'üë§ Apellido :',
                    'booking_page.email.email_label': 'üìß Correo :',
                    'booking_page.email.phone_label': 'üìû Tel√©fono :',
                    'booking_page.email.departure_label': 'üìÖ Fecha de salida :',
                    'booking_page.email.participants_label': 'üë• N√∫mero de personas :',
                    'booking_page.email.pickup_label': 'üè® Lugar de recogida :',
                    'booking_page.email.message_label': 'üí¨ Mensaje :',
                    'booking_page.email.separator': '---',
                    'booking_page.email.sent_from': 'Esta reserva se envi√≥ desde la p√°gina de reservas.'
                }
            };

            function applyTranslations(lang) {
                const dict = i18n[lang] || i18n.en;
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (dict[key]) el.textContent = dict[key];
                });
                document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                    const key = el.getAttribute('data-i18n-placeholder');
                    if (dict[key]) el.setAttribute('placeholder', dict[key]);
                });
                if (dict['booking_page.meta.title']) {
                    document.title = dict['booking_page.meta.title'];
                }
            }

            function syncLang(value) {
                // Update desktop display
                currentLang.textContent = value.toUpperCase();
                
                // Update mobile display
                mobileCurrentLang.textContent = langNames[value];
                
                // Update checkmarks
                document.querySelectorAll('[data-lang-check]').forEach(el => {
                    el.style.opacity = el.getAttribute('data-lang-check') === value ? '1' : '0';
                });
                document.querySelectorAll('[data-mobile-lang-check]').forEach(el => {
                    el.style.opacity = el.getAttribute('data-mobile-lang-check') === value ? '1' : '0';
                });
                
                localStorage.setItem('site_lang', value);
                document.documentElement.lang = value;
                applyTranslations(value);
                if (departurePicker) {
                    departurePicker.set('locale', getFlatpickrLocale(value));
                    departurePicker.set('dateFormat', flatpickrDateFormats[value] || flatpickrDateFormats.fr);
                }
                populateActivityDetails();
            }

            function syncCurrency(value) {
                // Update desktop display
                currentCurrency.textContent = value.toUpperCase();
                
                // Update mobile display
                mobileCurrentCurrency.textContent = value.toUpperCase();
                
                // Update checkmarks
                document.querySelectorAll('[data-currency-check]').forEach(el => {
                    el.style.opacity = el.getAttribute('data-currency-check') === value ? '1' : '0';
                });
                document.querySelectorAll('[data-mobile-currency-check]').forEach(el => {
                    el.style.opacity = el.getAttribute('data-mobile-currency-check') === value ? '1' : '0';
                });
                
                localStorage.setItem('site_currency', value);
                populateActivityDetails();
            }

            // Desktop dropdown event listeners
            document.querySelectorAll('[data-lang]').forEach(el => {
                el.addEventListener('click', e => {
                    e.preventDefault();
                    syncLang(e.currentTarget.getAttribute('data-lang'));
                });
            });

            document.querySelectorAll('[data-currency]').forEach(el => {
                el.addEventListener('click', e => {
                    e.preventDefault();
                    syncCurrency(e.currentTarget.getAttribute('data-currency'));
                });
            });

            // Mobile dropdown toggle functionality
            mobileLangDropdownBtn.addEventListener('click', function() {
                mobileLangDropdown.classList.toggle('hidden');
                this.querySelector('.fa-chevron-down').classList.toggle('rotate-180');
            });

            mobileCurrencyDropdownBtn.addEventListener('click', function() {
                mobileCurrencyDropdown.classList.toggle('hidden');
                this.querySelector('.fa-chevron-down').classList.toggle('rotate-180');
            });

            // Mobile dropdown event listeners
            document.querySelectorAll('[data-lang]').forEach(el => {
                el.addEventListener('click', e => {
                    e.preventDefault();
                    syncLang(e.currentTarget.getAttribute('data-lang'));
                    // Close mobile dropdown
                    mobileLangDropdown.classList.add('hidden');
                    mobileLangDropdownBtn.querySelector('.fa-chevron-down').classList.remove('rotate-180');
                });
            });

            document.querySelectorAll('[data-currency]').forEach(el => {
                el.addEventListener('click', e => {
                    e.preventDefault();
                    syncCurrency(e.currentTarget.getAttribute('data-currency'));
                    // Close mobile dropdown
                    mobileCurrencyDropdown.classList.add('hidden');
                    mobileCurrencyDropdownBtn.querySelector('.fa-chevron-down').classList.remove('rotate-180');
                });
            });
            
            // Initial run
            syncCurrency(storedCurrency);
            updatePrices(storedCurrency);
            applyTranslations(storedLang);
            window.bookingTranslations = i18n;
            window.getBookingDictionary = function(lang) {
                return i18n[lang] || i18n.en;
            };
        })();

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            populateActivityDetails();
        });

        // Hide R√©server button on non-homepage pages
        document.addEventListener('DOMContentLoaded', function() {
            const reserverBtn = document.querySelector('.reserver-btn');
            const reserverMobileSection = document.querySelector('.reserver-mobile-section');
            
            if (reserverBtn) {
                reserverBtn.style.display = 'none';
            }
            if (reserverMobileSection) {
                reserverMobileSection.style.display = 'none';
            }
        });
    </script>

    <script>
        // Remove all emoji characters from the page content (booking page)
        (function removeEmojisFromDOM() {
            if (!('createTreeWalker' in document)) return;
            const walker = document.createTreeWalker(document.body, NodeFilter.SHOW_TEXT);
            const nodes = [];
            let current;
            while ((current = walker.nextNode())) nodes.push(current);
            const emojiRegex = /[\p{Extended_Pictographic}\uFE0F\u200D]/gu;
            nodes.forEach(n => {
                try { n.nodeValue = n.nodeValue.replace(emojiRegex, ''); } catch (_) {}
            });
        })();
    </script>
</body>

</html> 